# TsShoppy

## ë°°í¬ ì£¼ì†Œ

<a>https://tsshoppy.vercel.app/</a>

## í”„ë¡œì íŠ¸ ì†Œê°œ

TypeScriptì™€ Reactë¥¼ ì´ìš©í•œ ì˜ë¥˜ ì‡¼í•‘ëª° ì›¹ì•±ì…ë‹ˆë‹¤.
JavaScriptë¡œë§Œ ì‘ì—…ì„ í•˜ê³  ìˆì—ˆëŠ”ë° ê¸°ì—…ì—ì„œ ìš”êµ¬í•˜ëŠ” ìŠ¤í™ ì¤‘ì— TypeScriptê°€ ë¹ ì§€ì§€ ì•Šê³  ë“¤ì–´ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
TypeScriptë¥¼ ì‚¬ìš©í•˜ë©´ ë²„ê·¸ê°€ 15% ì¤„ì¼ ìˆ˜ ìˆë‹¤ëŠ” ì—°êµ¬ë°œí‘œê°€ í¥ë¯¸ë¡œì› ê³  VSCodeì™€ ì˜ í˜¸í™˜ë˜ì–´ ì‰½ê²Œ ì½”ë”©ì„ í•  ìˆ˜ ìˆë‹¤ê³  í•˜ì—¬ TypeScriptë¥¼ ì‚¬ìš©í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.

## ì‹œì‘ ê°€ì´ë“œ

### ìš”êµ¬ì‚¬í•­

ë‚´ í™˜ê²½

-   Node.js 18.12.0
-   yarn 1.22.19
-   npm 8.19.2

ì„¤ì¹˜

```bash
$ git clone https://github.com/tmdgus95/tsshoppy.git
```

```
$ npm install or yarn install
$ npm start or yarn start
```

## Stack ğŸ§¹

### Environment

![Visual Studio Code](https://img.shields.io/badge/Visual%20Studio%20Code-007ACC?style=for-the-badge&logo=Visual%20Studio%20Code&logoColor=white)
![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white)
![Github](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white)

### Development

![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=Typescript&logoColor=white)
![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)
![Redux](https://img.shields.io/badge/Redux-764ABC?style=for-the-badge&logo=Redux&logoColor=61DAFB)
![ReactQuery](https://img.shields.io/badge/ReactQuery-FF4154?style=for-the-badge&logo=ReactQuery&logoColor=61DAFB)
![Firebase](https://img.shields.io/badge/Firebase-FFCA28?style=for-the-badge&logo=Firebase&logoColor=ffffff)

## í™”ë©´ êµ¬ì„± ğŸ–¥ï¸

|                                                           ë©”ì¸ í˜ì´ì§€                                                           |                                                           êµ¬ê¸€ ë¡œê·¸ì¸                                                           |
| :-----------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------: |
| <img width="329" src="https://user-images.githubusercontent.com/118142479/233291301-01c1aee0-bee0-4749-8c24-29fc70d48d01.gif"/> | <img width="329" src="https://user-images.githubusercontent.com/118142479/233291105-d3ca5e3a-aa03-4b0e-94b5-d9f42cac71dc.gif"/> |
|                                                         ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€                                                         |                                                       ì œí’ˆ ë””í…Œì¼ í˜ì´ì§€                                                        |
| <img width="329" src="https://user-images.githubusercontent.com/118142479/233291307-7e6f173c-1ec9-4c70-a77f-a9979b56e3d7.gif"/> | <img width="329" src="https://user-images.githubusercontent.com/118142479/233291311-c3600d7b-72e0-4559-8704-4c0d87db1998.gif"/> |

## ì£¼ìš” ê¸°ëŠ¥ ğŸ“¦

### â­ï¸ ì–´ë“œë¯¼ ê³„ì • ê¸°ëŠ¥

-   ì–´ë“œë¯¼ ê³„ì •ì„ êµ¬ë¶„ ê°€ëŠ¥
-   ì–´ë“œë¯¼ ê³„ì •ì€ íŒë§¤ ì˜ë¥˜ ì¶”ê°€ ê°€ëŠ¥

### â­ï¸ ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥

-   ì‚¬ê³  ì‹¶ì€ ì˜ë¥˜ë¥¼ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ ê°€ëŠ¥
-   ì¥ë°”êµ¬ë‹ˆì—ì„œ ë¬¼í’ˆ ìˆ˜ëŸ‰ ë³€ê²½, ì‚­ì œ ê°€ëŠ¥

## í”„ë¡œì íŠ¸ í›„ê¸°

### â™¨ï¸íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì–´ë ¤ì›Œ!

-   ë¡œê·¸ì¸ì„ í•˜ë©´ ì„œë²„ì—ì„œ ì‘ë‹µìœ¼ë¡œ ë§ì€ ë°ì´í„°ë¥¼ ë„˜ê²¨ì£¼ì§€ë§Œ ë‚´ê°€ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ë°ì´í„°ê°€ ëª‡ ê°œ ì—†ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë°ì´í„°ì— íƒ€ì…ì„ ì§€ì •í•´ ì¤˜ì•¼ í•œë‹¤ê³  í•´ì„œ ì²˜ìŒì—ëŠ” ë§‰ë§‰í–ˆì§€ë§Œ ì¼ë‹¨ ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ í•„ìš”í•œ ë°ì´í„°ì—ë§Œ íƒ€ì…ì„ ì§€ì •í•´ë‘  ìœ ì € ê´€ë ¨í•´ì„œëŠ” anyë¥¼ ì“°ê²Œ ë¨

```
export function onUserStateChange(callback: any) {
    onAuthStateChanged(auth, async (user) => {
        const updatedUser = user ? await adminUser(user) : null;
        callback(updatedUser);
    });
}

async function adminUser(user: any) {
    return get(ref(database, 'admins')).then((snapshot) => {
        if (snapshot.exists()) {
            const admins = snapshot.val();
            const isAdmin = admins.includes(user.uid);
            return { ...user, isAdmin };
        }
        return user;
    });
}
```

-   JavaScriptë‘ ì‚¬ì†Œí•œ ë¶€ë¶„ì—ì„œ ì°¨ì´ê°€ ì¢€ ìˆì–´ì„œ ì²˜ìŒì—ëŠ” ë§ì´ í—¤ë§¤ì—ˆë‹¤. ë¦¬í„´ ê°’ìœ¼ë¡œ ê·¸ëƒ¥ childrenë§Œ ì¨ë†“ì„ ê²½ìš° ì—ëŸ¬ë¥¼ ì£¼ëŠ” ë°”ëŒì— JavaScriptì—ì„œëŠ” ë¬¸ì œê°€ ì—†ì—ˆëŠ”ë° ìê¾¸ ë¬¸ì œë¥¼ ì£¼ë‹ˆ ë” í˜¼ë€ìŠ¤ëŸ¬ì› ë‹¤.

```
export default function ProtectedRoute({ children, requireAdmin }: Props) {
    const user = useSelector((state: RootState) => state.user);
    if (!user.displayName || (requireAdmin && !user.isAdmin)) {
        return <Navigate to='/' replace />;
    }

    return <>{children}</>;
}
TypeScript
```

```
export default function ProtectedRoute({ children, requireAdmin }) {
    const { user } = useAuthContext();
    if (!user || (requireAdmin && !user.isAdmin)) {
        return <Navigate to='/' replace />;
    }
    return children;
}
JavaScript
```

-   TypeScriptëŠ” ì—„ê²©í•˜ë‹¤. optionì´ì•¼ íƒ€ì… ì§€ì •í•´ ì£¼ì§€ ì•Šìœ¼ë©´ ê²½ê³ ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤ê³  ìƒê°í–ˆì§€ë§Œ 2ë²ˆì§¸ ì¸ìì¸ indexëŠ” ë¬´ì¡°ê±´ ìˆ«ìì—¬ì„œ íƒ€ì… ì¶”ë¡ ì„ í•´ì¤„ ê±°ë¼ê³  ìƒê°í–ˆì§€ë§Œ indexì—ë„ íƒ€ì…ì„ ì§€ì •í•´ ì¤˜ì•¼ í–ˆë‹¤
    ```
    {options &&
                          options.map((option: string, i: number) => (
                              <option key={i}>{option}</option>
                          ))}
    ```
-   TypeScriptë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ JavaScriptì—ëŒ€í•´ ì˜ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤. Axiosê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ê³  async await ê°™ì€ í¸ë¦¬í•œ ê¸°ëŠ¥ì´ ìˆë‹¤ë³´ë‹ˆ Promiseì— ëŒ€í•´ ì†Œí˜íˆ ìƒê°í•˜ê³  ìˆì—ˆëŠ”ë° TypeScriptë¥¼ ì´ìš©í•´ì„œ ì½”ë”©ì„ í•˜ë ¤ë©´ ë¦¬í„´íƒ€ì…ì— ëŒ€í•´ì„œë„ ì˜ ìƒê°í•´ì•¼ê¸° ë•Œë¬¸ì´ë‹¤.

```
export async function getCart(userId: string): Promise<CartProduct[]> {
    return get(ref(database, `carts/${userId}`)).then((snapshot) => {
        const items = snapshot.val() || {};
        return Object.values(items);
    });
}

export async function getProducts(): Promise<Product[]> {
    return get(ref(database, 'products')).then((snapshot) => {
        if (snapshot.exists()) {
            return Object.values(snapshot.val());
        }
        return [];
    });
}
```

### âš”ï¸ë¦¬ë•ìŠ¤ íˆ´í‚·ì´ ê¼­ ì¨ì•¼ í•˜ë‚˜?

-   ê·œëª¨ê°€ ìˆê±°ë‚˜ ë³µì¡í•œ í”„ë¡œì íŠ¸ë¥¼ ì ‘í•œ ì ì´ ì—†ì–´ì„œ contextApië¡œë„ ì¶©ë¶„í•˜ê±°ë‚˜ ì—†ì–´ë„ ë³„ë¬¸ì œ ì—†ì—ˆì§€ë§Œ ì´ë²ˆì— ì—°ìŠµ ì‚¼ì•„ í•œë²ˆ ì‚¬ìš©í•´ ë³´ì•˜ëŠ”ë° ì»¤ìŠ¤í…€í›…ì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ê¹”ë”í•´ì¡Œì§€ë§Œ ê·¸ëƒ¥ ì‚¬ìš©í•  ë•ŒëŠ” ìƒë‹¹íˆ ì½”ë“œì˜ ê°€ë…ì„±ì´ ë–¨ì–´ì¡Œë‹¤.

```
/// í›… ì‚¬ìš©í›„

import { useState } from 'react';
import { useLocation } from 'react-router-dom';
import Button from '../components/ui/Button';

const { addOrUpdateItem } = useCart();

    const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
        const prodcut = {
            id,
            image,
            title,
            price,
            option: selected,
            quantitiy: 1,
        };
        addOrUpdatedToCart(uid, prodcut);
    };

/// í›… ì‚¬ìš©ì „

import { useState } from 'react';
import { useLocation } from 'react-router-dom';
import Button from '../components/ui/Button';
import { RootState } from '../store/store';
import { useSelector } from 'react-redux';
import { addOrUpdatedToCart } from '../api/firebase';

const { uid } = useSelector((state: RootState) => state.user);

    const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
        const prodcut = {
            id,
            image,
            title,
            price,
            option: selected,
            quantitiy: 1,
        };
        addOrUpdateItem.mutate(prodcut, {
            onSuccess: () => {
                setSuccess('ì„±ê³µì ìœ¼ë¡œ ì œí’ˆì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                setTimeout(() => {
                    setSuccess(null);
                }, 3000);
            },
        });
    };
```
